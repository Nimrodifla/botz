<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" type="image/png" href="https://i.imgur.com/3Vr8MdI.png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <link rel="stylesheet" type="text/css" href="/style.css">
        <title>בנק יותם בוץ ושות</title>
    </head>
    <body>
        <center>
            <img src="https://i.imgur.com/OIBEwul.png"/><br><br>
            <button onclick="logout()">LogOut</button><br>
            <h3 class="curr">1<img class="sign" src="https://i.imgur.com/WaKvrmO.png"/>= 0.2 ₪</h3>
            <div class="info">
                @#username#<br>
                You have: #amount#<img class="sign" src="https://i.imgur.com/WaKvrmO.png"/><br>
                <button onclick="loadFunds()">Load funds!</button><br>
            </div>
            <br>

            <div class="curr">
                Transfer<br>
                to: <select name="users" id="users">
                </select>
                <!--input id="username" type="text" placeholder="user to transfer to" /---><br>
                <input id="amount" type="number" placeholder="amount to transfer" /><img class="sign" src="https://i.imgur.com/WaKvrmO.png"/><br>
                <button onclick="transfer()">trasfer</button>
            </div><br>

            <div class="curr">
                Transfers History<br><br>
                <div id="transfers">

                </div>
            </div><br>
            
            <br>
            <span class="creators">Creators: Avichay, Nimnod and Ferfer</span>
        </center>
    </body>
    <script>
        let userDropdown = document.getElementById('users');
        let transfersHistory = document.getElementById('transfers');
        let users = [#users#]; // should be error its ok :)
        let transfers = [#transfers#]; // should be error its ok :)

        // init dropdown
        userDropdown.innerHTML += '<option value="Select user">Select user</option>';
        users.map((user)=>{
            userDropdown.innerHTML += '<option value="' + user + '">' + user + '</option>';
        });


        // init transfers history
        if (transfers.length > 0)
        {
            transfers.map((deal)=>{
                let sender = deal.sender;
                let reciver = deal.reciver;
                let amount = deal.amount;

                transfersHistory.innerHTML += '<div class="transfer">@' + sender + ' > ' + amount + ' > @' + reciver + '</div><br>';
            });
        }
        else
        {
            transfersHistory.innerHTML += 'no transfers. LOSER!';
        }


        function transfer() {
            let username = document.getElementById("users").value;
            let amount = document.getElementById("amount").value;
            window.location.href = "http://" + window.location.hostname + "/transfer/#hash#/" + username + "/" + amount;
        }

        function logout()
        {
            window.location.href = "http://" + window.location.hostname + "/logout/#hash#";
        }

        function loadFunds()
        {
            alert("Send ₪ to 0542061152 (Nimi) on BIT and Botz will load on your account! REMEMBER: 1B = 0.2₪");
        }
    </script>
</html>